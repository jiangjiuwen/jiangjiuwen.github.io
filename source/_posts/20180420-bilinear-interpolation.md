---
title: 双线性插值算法
categories: 编程之美
date: 2018-04-20 19:49:36
tags:
- 插值算法
- 图像处理
---
前段时间项目上为了减小图像体积，比如将一个512 \* 512的图像插值到100 \* 100，用到了双线性插值算法，今天记录一下。

主要包括两个步骤：矩阵映射和插值计算

# 矩阵映射
要将一个(x, y)的矩阵比如512 \* 512转换成(x', y')的矩阵比如100 \* 100，则其缩放比为(x/x', y/y')

那么转换后的矩阵中的点(m, n)映射到原始矩阵中的点为(m \* x/x', n \* y/y')

比如，转换矩阵中的点(1, 1)则对应原始矩阵中的点(5.12, 5.12)，但是坐标点都是整数，原始矩阵中没有与之对应的像素点，那么就需要使用改点邻近的四个像素点进行计算，得到一个像素值。

# 插值计算
下图是在网上找的一个插值计算的示意图。

![](https://upload.wikimedia.org/wikipedia/commons/e/e7/Bilinear_interpolation.png)

所谓的双线性插值实际上使用了三次线性插值，首先利用点Q12和点Q22进行插值计算得到点R2的值，然后利用点Q11和Q21点进行插值计算得到点R1的值，最后利用得到点R1和点R2进行插值从而得到点P的值。

线性插值的过程为(R2 - Q12) / (Q22 - R2) = (x - x1) / (x2 - x)

如果Q12 Q22 Q11 Q21的像素值分别为200, 150, 100, 50，那么首先计算出R2的值为194，然后计算出R1的值为94，然后根据R1和R2计算出P点的像素值为182，所以经过插值计算后，映射之后的点(1, 1)的像素值为182。